<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abstract Driven Development - Documentation</title>
    <meta name="description" content="Complete documentation for Abstract Driven Development (ADD) - a proven architecture pattern with AI assistance">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.3.0/dist/mermaid.min.js"></script>

    <style>
        :root {
            /* Colors - EXACT match with index.html */
            --primary-color: #0284c7;
            --primary-dark: #0369a1;
            --primary-light: #0ea5e9;
            --secondary-color: #7c3aed;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;

            /* Neutrals */
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gray-900: #0f172a;

            /* Typography */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;

            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;

            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --transition-slow: 350ms ease;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: 16px;
            line-height: 1.6;
            color: var(--gray-800);
            background-color: #ffffff;
            margin: 0;
            padding: 0;
        }

        /* Navigation - exact match with index.html */
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 var(--space-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
        }

        .nav-brand a {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            text-decoration: none;
            color: var(--gray-900);
            font-weight: 600;
            font-size: 1.25rem;
            transition: var(--transition-normal);
        }

        .nav-brand a:hover {
            color: var(--primary-color);
        }

        .nav-brand i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .nav-menu {
            display: flex;
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: var(--space-xl);
            align-items: center;
        }

        .nav-link {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            padding: var(--space-sm) var(--space-md);
            border-radius: 6px;
            transition: var(--transition-normal);
        }

        .nav-link:hover {
            color: var(--primary-color);
            background: var(--gray-50);
        }

        .nav-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .bar {
            width: 24px;
            height: 3px;
            background: var(--gray-600);
            border-radius: 2px;
            transition: var(--transition-normal);
        }

        /* Main Layout */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: var(--space-3xl) var(--space-lg);
        }

        .docs-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: var(--space-3xl);
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 90px;
            height: fit-content;
            background: white;
            border-radius: 12px;
            padding: var(--space-xl);
            border: 1px solid var(--gray-200);
            box-shadow: var(--shadow-md);
        }

        .sidebar h3 {
            margin: 0 0 var(--space-lg) 0;
            color: var(--gray-800);
            font-size: 1.1rem;
        }

        .sidebar-nav {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--gray-600);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: rgba(102, 126, 234, 0.1);
            color: var(--primary-color);
        }

        /* Content */
        .content {
            background: white;
            border-radius: 12px;
            border: 1px solid var(--gray-200);
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        .section {
            padding: var(--space-2xl);
            border-bottom: 1px solid var(--gray-200);
        }

        .section:last-child {
            border-bottom: none;
        }

        .section h1 {
            margin: 0 0 var(--space-lg) 0;
            color: var(--gray-800);
            font-size: 2rem;
            font-weight: 700;
        }

        .section h2 {
            margin: var(--space-2xl) 0 var(--space-lg) 0;
            color: var(--gray-800);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .section h3 {
            margin: var(--space-xl) 0 var(--space-lg) 0;
            color: var(--gray-700);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .section p {
            margin-bottom: var(--space-lg);
            color: var(--gray-600);
        }

        .section ul, .section ol {
            margin-bottom: var(--space-lg);
            color: var(--gray-600);
        }

        .section li {
            margin-bottom: 0.5rem;
        }

        /* Alerts */
        .alert {
            padding: var(--space-lg);
            border-radius: 8px;
            margin: var(--space-lg) 0;
        }

        .alert-info {
            background: #eff6ff;
            border: 1px solid #93c5fd;
            color: #1e40af;
        }

        .alert-warning {
            background: #fffbeb;
            border: 1px solid #fbbf24;
            color: #92400e;
        }

        /* Mermaid Diagrams - EXACT copy from working test */
        .mermaid-diagram {
            margin: var(--space-xl) 0;
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: var(--space-xl);
            box-shadow: var(--shadow-sm);
        }

        .mermaid {
            width: 100% !important;
            display: block !important;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .mermaid:hover {
            transform: scale(1.02);
        }

        .mermaid svg {
            width: 100% !important;
            height: auto !important;
            max-width: 100% !important;
            display: block !important;
            margin: 0 auto;
        }

        /* Code blocks */
        .code-block {
            background: var(--gray-800);
            color: var(--gray-100);
            padding: var(--space-lg);
            border-radius: 8px;
            margin: var(--space-lg) 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Benefits grid */
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
            margin: var(--space-xl) 0;
        }

        .benefit-item {
            background: var(--gray-50);
            padding: var(--space-lg);
            border-radius: 8px;
            border: 1px solid var(--gray-200);
        }

        .benefit-item i {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: var(--space-lg);
        }

        .benefit-item h4 {
            margin: 0 0 0.5rem 0;
            color: var(--gray-800);
        }

        .benefit-item p {
            margin: 0;
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* Modal for diagram zoom */
        .diagram-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }

        .diagram-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .diagram-modal-content {
            background: white;
            border-radius: 12px;
            padding: var(--space-xl);
            max-width: 90vw;
            max-height: 90vh;
            overflow: auto;
            position: relative;
        }

        .diagram-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--gray-100);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: var(--gray-600);
        }

        .diagram-close-btn:hover {
            background: var(--gray-200);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .docs-layout {
                grid-template-columns: 1fr;
                gap: var(--space-xl);
            }

            .sidebar {
                position: static;
                order: 2;
            }

            .container {
                padding: var(--space-xl) var(--space-md);
            }

            .nav-menu {
                display: none;
            }

            .nav-toggle {
                display: flex;
            }

            .section h1 {
                font-size: 2rem;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 640px) {
            .nav-container {
                padding: 0 var(--space-md);
            }

            .container {
                padding: var(--space-lg) var(--space-sm);
            }

            .section {
                padding: var(--space-xl);
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/">
                    <i class="fas fa-cube"></i>
                    <span>Abstract Driven</span>
                </a>
            </div>

            <div class="nav-menu" id="nav-menu">
                <ul class="nav-list">
                    <li><a href="/#overview" class="nav-link">Overview</a></li>
                    <li><a href="/#principles" class="nav-link">Principles</a></li>
                    <li><a href="/#patterns" class="nav-link">Patterns</a></li>
                    <li><a href="/#examples" class="nav-link">Examples</a></li>
                    <li><a href="/documentation-new.html" class="nav-link">Docs</a></li>
                </ul>
            </div>

            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="docs-layout">
            <!-- Sidebar -->
            <aside class="sidebar">
                <h3>Documentation</h3>
                <ul class="sidebar-nav">
                    <li><a href="#overview" class="active">Overview</a></li>
                    <li><a href="#architecture">5-Layer Architecture</a></li>
                    <li><a href="#reference-rules">Reference Rules</a></li>
                    <li><a href="#port-adapter">Port & Adapter</a></li>
                    <li><a href="#event-driven">Event-Driven</a></li>
                    <li><a href="#examples">Examples</a></li>
                </ul>
            </aside>

            <!-- Content -->
            <main class="content">
                <!-- Overview Section -->
                <section id="overview" class="section">
                    <h1>Abstract Driven Development (ADD)</h1>

                    <div class="alert alert-info">
                        <p><strong>The First AI-Centric Architecture:</strong> ADD enables AI to write complete software from start to finish, with human-in-the-loop control, solving the uncontrollable VIBE code problem while maintaining enterprise-grade quality.</p>
                    </div>

                    <p>Abstract Driven Development (ADD) is a software architecture pattern that emphasizes the separation of concerns through well-defined abstractions. It provides a systematic approach to building maintainable, testable, and scalable applications.</p>

                    <h2>Core Principles</h2>
                    <ul>
                        <li><strong>Abstraction First:</strong> Define interfaces before implementations</li>
                        <li><strong>Dependency Inversion:</strong> High-level modules should not depend on low-level modules</li>
                        <li><strong>Single Responsibility:</strong> Each layer has a clear, single purpose</li>
                        <li><strong>Testability:</strong> All components can be unit tested in isolation</li>
                        <li><strong>AI-Friendly:</strong> Structure enables AI to generate complete, maintainable code</li>
                    </ul>
                </section>

                <!-- Architecture Section -->
                <section id="architecture" class="section">
                    <h1>5-Layer Architecture</h1>

                    <p>ADD organizes code into five distinct layers, each with specific responsibilities:</p>

                    <div class="benefits-grid">
                        <div class="benefit-item">
                            <i class="fas fa-globe"></i>
                            <h4>Boundary Layer</h4>
                            <p>Handles external communication - DTOs, controllers, APIs, and system edges.</p>
                        </div>

                        <div class="benefit-item">
                            <i class="fas fa-heart"></i>
                            <h4>Core Abstractions</h4>
                            <p>Defines entities, ports, and events - the heart of your domain model.</p>
                        </div>

                        <div class="benefit-item">
                            <i class="fas fa-cogs"></i>
                            <h4>Operators Layer</h4>
                            <p>Contains business logic and use cases that orchestrate the domain.</p>
                        </div>

                        <div class="benefit-item">
                            <i class="fas fa-plug"></i>
                            <h4>Implementations</h4>
                            <p>Concrete implementations of ports - adapters, repositories, external services.</p>
                        </div>

                        <div class="benefit-item">
                            <i class="fas fa-rocket"></i>
                            <h4>Bootstrap Layer</h4>
                            <p>Application startup, dependency injection, and configuration wiring.</p>
                        </div>
                    </div>
                </section>

                <!-- Reference Rules Section -->
                <section id="reference-rules" class="section">
                    <h1>Reference Rules Between Layers</h1>

                    <div class="mermaid-diagram">
                        <div class="mermaid">
flowchart BT
    S[Bootstrap Layer]
    O[Operators Layer]
    I[Implementations]
    B[Boundary Layer]
    C[Core Abstractions]

    O --> B
    O --> C
    I --> C
    S --> O
    S --> I

    style C fill:#fff7ed,stroke:#c2410c,stroke-width:2px
    style B fill:#eff6ff,stroke:#1d4ed8,stroke-width:2px
    style O fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    style I fill:#fef3c7,stroke:#d97706,stroke-width:2px
    style S fill:#f3e8ff,stroke:#9333ea,stroke-width:2px
                        </div>
                    </div>

                    <div class="alert alert-warning">
                        <p><strong>Critical Rule:</strong> No direct calls between Operators ↔ Implementations. Communication happens via:</p>
                        <ul>
                            <li>Interfaces declared in Core Abstractions (DI injects Implementation)</li>
                            <li>Internal events (Core Events)</li>
                        </ul>
                    </div>

                    <h2>Processing Flow</h2>

                    <div class="mermaid-diagram">
                        <div class="mermaid">
sequenceDiagram
    participant Ext as External System
    participant Boundary
    participant Operators
    participant Impl as Implementations

    Ext->>Boundary: Request DTO
    Boundary->>Operators: DTO
    Operators->>Impl: Call via interface
    Impl-->>Operators: Entity/Result
    Operators-->>Boundary: Response DTO
                        </div>
                    </div>
                </section>

                <!-- Port & Adapter Section -->
                <section id="port-adapter" class="section">
                    <h1>Port & Adapter Pattern</h1>

                    <div class="alert alert-info">
                        <p><strong>Intent:</strong> Isolate business logic from external systems by defining clear interfaces (ports) and implementing adapters that handle technical integration details.</p>
                    </div>

                    <h2>Problem</h2>
                    <ul>
                        <li>Business logic gets coupled to specific technologies</li>
                        <li>Difficult to test business logic without external dependencies</li>
                        <li>Technology changes require modifications throughout the system</li>
                        <li>Different environments need different implementations</li>
                    </ul>

                    <h2>Solution</h2>
                    <p>Define abstract interfaces (ports) in Core Abstractions that express business needs, then implement concrete adapters in Implementations that handle the technical details.</p>

                    <div class="mermaid-diagram">
                        <div class="mermaid">
flowchart LR
    Operator[Operator] --> Port[Port Interface]
    Port -.-> Adapter1[PostgreSQL Adapter]
    Port -.-> Adapter2[MongoDB Adapter]
    Port -.-> Adapter3[In-Memory Adapter]

    Adapter1 --> DB[(PostgreSQL)]
    Adapter2 --> Mongo[(MongoDB)]
    Adapter3 --> Memory[Memory Store]

    style Port fill:#fff7ed,stroke:#c2410c,stroke-width:2px
    style Operator fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    style Adapter1 fill:#fef3c7,stroke:#d97706,stroke-width:2px
    style Adapter2 fill:#fef3c7,stroke:#d97706,stroke-width:2px
    style Adapter3 fill:#fef3c7,stroke:#d97706,stroke-width:2px
                        </div>
                    </div>
                </section>

                <!-- Event-Driven Section -->
                <section id="event-driven" class="section">
                    <h1>Event-Driven Communication</h1>

                    <h2>Problem</h2>
                    <ul>
                        <li>Direct coupling between components creates rigid systems</li>
                        <li>Changes in one module require modifications in dependent modules</li>
                        <li>Difficult to add new functionality without modifying existing code</li>
                    </ul>

                    <h2>Solution</h2>
                    <p>Use events to communicate state changes and trigger side effects, with two distinct event types: <strong>Core Events</strong> for internal communication and <strong>Boundary Events</strong> for external integration.</p>

                    <div class="mermaid-diagram">
                        <div class="mermaid">
flowchart LR
    OpA[Operator A] --> EventBus[Event Bus]
    EventBus --> OpB[Operator B]
    OpB --> EventBus
    EventBus --> ExtSystem1[External System 1]
    EventBus --> ExtSystem2[External System 2]

    style OpA fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    style OpB fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    style EventBus fill:#fff7ed,stroke:#c2410c,stroke-width:2px
    style ExtSystem1 fill:#f3f4f6,stroke:#6b7280,stroke-width:2px
    style ExtSystem2 fill:#f3f4f6,stroke:#6b7280,stroke-width:2px
                        </div>
                    </div>
                </section>

                <!-- Examples Section -->
                <section id="examples" class="section">
                    <h1>Implementation Examples</h1>

                    <h2>Port Definition (Core Abstractions)</h2>
                    <div class="code-block">
                        <pre><code>// core-abstractions/ports/user.repository.ts
export interface IUserRepository {
  save(user: User): Promise&lt;void&gt;;
  findById(id: UserId): Promise&lt;User | null&gt;;
  findByEmail(email: Email): Promise&lt;User | null&gt;;
  findActiveUsers(): Promise&lt;User[]&gt;;
}</code></pre>
                    </div>

                    <h2>Adapter Implementation</h2>
                    <div class="code-block">
                        <pre><code>// implementations/adapters/postgresql-user.repository.ts
export class PostgreSQLUserRepository implements IUserRepository {
  constructor(private db: Database) {}

  async save(user: User): Promise&lt;void&gt; {
    await this.db.query(
      'INSERT INTO users (id, email, name) VALUES ($1, $2, $3)',
      [user.id, user.email, user.name]
    );
  }

  async findById(id: UserId): Promise&lt;User | null&gt; {
    const result = await this.db.query(
      'SELECT * FROM users WHERE id = $1',
      [id]
    );
    return result.rows[0] ? User.fromRow(result.rows[0]) : null;
  }
}</code></pre>
                    </div>

                    <h2>Operator (Use Case)</h2>
                    <div class="code-block">
                        <pre><code>// operators/use-cases/create-user.operator.ts
export class CreateUserOperator {
  constructor(
    private userRepo: IUserRepository,
    private eventBus: IEventBus
  ) {}

  async execute(dto: CreateUserDTO): Promise&lt;CreateUserResponseDTO&gt; {
    const user = new User(dto.email, dto.name);

    await this.userRepo.save(user);

    await this.eventBus.publish(new UserCreatedEvent(user));

    return new CreateUserResponseDTO(user.id, user.email);
  }
}</code></pre>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // Simple, clean Mermaid initialization
        mermaid.initialize({
            startOnLoad: true,
            fontSize: 16,
            securityLevel: 'loose',
            theme: 'base',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#1a202c',
                primaryBorderColor: '#667eea',
                lineColor: '#667eea',
                secondaryColor: '#f7fafc',
                tertiaryColor: '#edf2f7',
                background: '#ffffff',
                mainBkg: '#f8fafc',
                secondBkg: '#edf2f7',
                tertiaryBkg: '#e2e8f0'
            }
        });

        // Post-processing like test file
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.querySelectorAll('.mermaid svg').forEach(svg => {
                    svg.removeAttribute('width');
                    svg.removeAttribute('height');
                    svg.style.width = '100%';
                    svg.style.height = 'auto';
                    svg.style.maxWidth = '100%';
                    if (!svg.getAttribute('preserveAspectRatio')) {
                        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                    }

                    // Add click handler for modal
                    const diagram = svg.closest('.mermaid');
                    if (diagram) {
                        diagram.addEventListener('click', function() {
                            openDiagramModal(this);
                        });
                    }
                });
            }, 300);
        });

        // Simple modal for diagram zoom
        function openDiagramModal(diagramElement) {
            const svg = diagramElement.querySelector('svg');
            if (!svg) return;

            let modal = document.getElementById('diagram-modal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'diagram-modal';
                modal.className = 'diagram-modal';
                modal.innerHTML = `
                    <div class="diagram-modal-content">
                        <button class="diagram-close-btn">×</button>
                    </div>
                `;
                document.body.appendChild(modal);

                modal.addEventListener('click', function(e) {
                    if (e.target === this || e.target.classList.contains('diagram-close-btn')) {
                        this.classList.remove('active');
                    }
                });
            }

            const modalContent = modal.querySelector('.diagram-modal-content');
            const clonedSvg = svg.cloneNode(true);

            // Clear previous content except close button
            const closeBtn = modalContent.querySelector('.diagram-close-btn');
            modalContent.innerHTML = '';
            modalContent.appendChild(closeBtn);
            modalContent.appendChild(clonedSvg);

            modal.classList.add('active');
        }

        // Simple sidebar navigation
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            const sections = document.querySelectorAll('.section');

            // Update active link on scroll
            function updateActiveLink() {
                let current = '';
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= 100 && rect.bottom >= 100) {
                        current = section.id;
                    }
                });

                sidebarLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active');
                    }
                });
            }

            window.addEventListener('scroll', updateActiveLink);

            // Handle sidebar clicks
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        const headerOffset = 80;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });

                        sidebarLinks.forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>